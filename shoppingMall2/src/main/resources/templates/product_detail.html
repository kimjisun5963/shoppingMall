<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>쇼핑몰</title>
<link href="/css/style.css" rel="stylesheet">
</head>
<body>
	<div th:replace="~{/members/layout::header}"></div>
		<div class="container">
		<h1 class="page_title px-10">상품 상세보기</h1>
		<div class="product_detail_top">
			<input type="hidden" name="pno" id="pno" th:value="${product.pno}">
			<div class="img_box">
				<img th:src="@{'/images/' + ${product.pimg}}" alt="상품">
			</div>
			<div class="info_box">
				<div class="pname">
					[[${product.pname}]]
				</div>
				<div class="price d-flex flex-justify-between align-items-center">
					<span>가격</span><span><strong>[[${product.saleprice}]]</strong>원</span>
				</div>
				<div class="amount  d-flex flex-justify-between align-items-center">
					<span>재고 수량</span> <span>[[${product.amount}]]개</span>
				</div>
				<div class="order_amount d-flex flex-justify-between align-items-center">
					<span>주문 수량</span>
					<div>
						<input type="number" id="orderAmount" name="orderAmount" value="1">
					</div>
				</div>
				<div class="btns d-flex flex-justify-between align-items-center">
					<button class="btn-pink" onclick="orderNow()">바로 주문</button>
					<button class="btn-pink-outline" onclick="registShoppingBasket()">장바구니 담기</button>
				</div>
			</div>
		</div>
		<div class="product_detail_bottom">
			<div th:text="${product.pcontent}"></div>
			<img th:src="@{'/images/' + ${product.pcontent_img}}" alt="상품 설명 이미지">
		</div>
		
		<h5 class="sub_title">상품 후기</h5>
		<div class="product_review_box" th:each="review : ${reviewList}">
			<div class="review_content">
			[[${review.rcontent}]]
			</div>
			<div class="d-flex flex-justify-between align-items-center text-gray">
				<span>[[${review.username}]]
					<span th:if="${review.check != 0}">(실사용자)</span>
					<span th:unless="${review.check != 0}"></span>
				</span>
				<span>[[${review.regdate}]]</span>
			</div>
		</div>
		
		<div class="product_review_box">
			<form action="/members/registReview" method="post">
				<input type="hidden" name="pno" th:value="${product.pno}">
				<textarea name="rcontent" placeholder="상품 후기"></textarea>
				<div class="overflow-hidden">
					<input class="btn-pink float-right" type="submit" value="후기 등록">
				</div>
			</form>
		</div>
			
	</div>
	<script>
	const orderAmount = document.querySelector("#orderAmount");
	const pno = document.querySelector("#pno");
	
	function registShoppingBasket(){
		location.href="/members/registShoppingBasket?samount=" + orderAmount.value + "&pno=" + pno.value;
	}
	function orderNow(){
		location.href="/members/salesOneProduct?samount=" + orderAmount.value + "&pno=" + pno.value;
	}
	</script>
	
</body>
</html>